#1. Контекст проекта

Проект — это Python-библиотека для расчёта торговых технических индикаторов.
Стек: Python 3.9+, с использованием Pandas и NumPy.
Все исходные файлы должны размещаться в директории src/.

#2. Текущая реализация и проблема

На данный момент реализации нет — задача разрабатывается с нуля.
Обратная совместимость не требуется.

# 3. Цель задачи

Создать модульную библиотеку, предоставляющую интерфейс для расчёта торговых технических индикаторов на основе временных рядов цен.
Тип задачи: добавление новой функциональности (библиотека с нуля).

# 4. Требования к функционалу

    Реализовать классы-индикаторы для расчёта:
        Простой скользящей средней (SMA)
        Среднего истинного диапазона (ATR)
    Каждый индикатор должен быть реализован как отдельный класс с методом .calculate().
    Входные данные:
        Либо pd.DataFrame с колонками: open, high, low, close, volume, и datetime-индексом.
        Либо pd.Series с datetime-индексом (например, только цены закрытия).
    Выходные данные:
        pd.Series — если индикатор возвращает один ряд (например, SMA).
        pd.DataFrame — если индикатор возвращает несколько рядов (например, ATR может возвращать TR и ATR).
    Параметры расчёта передаются при инициализации класса (например, period=14).
    Интерфейс должен быть удобен для импорта и использования в других проектах.

# 5. Ограничения и запреты

    Запрещено использовать любые сторонние библиотеки, кроме pandas и NumPy.
    Код должен быть отформатирован в соответствии с black.
    Python версии 3.9 или выше.

# 6. Требования к архитектуре и коду

    Архитектура: объектно-ориентированная, каждый индикатор — отдельный класс.
    Классы должны быть чистыми, без побочных эффектов, легко тестируемыми.
    Все публичные методы должны содержать типизацию (type hints).
    Желательно использовать векторизованные операции pandas/NumPy — без явных циклов по строкам.
    Документация: docstring в стиле Google или NumPy для каждого публичного класса и метода.

# 7. Формат результата

    Создать следующие файлы в src/:
        src/indicators/__init__.py
        src/indicators/sma.py — класс SMAIndicator
        src/indicators/atr.py — класс ATRIndicator
    Каждый файл содержит один класс индикатора и соответствующую логику расчёта.
    Пример структуры класса:

```python
class SMAIndicator:
    def __init__(self, period: int = 14):
        self.period = period

    def calculate(self, prices: pd.Series) -> pd.Series:
        # реализация
```

# 8. Тестирование и критерии приёмки

    Должны быть написаны integration-тесты (например, в папке tests/), проверяющие корректность расчётов.
    Тесты должны использовать реалистичные OHLCV-данные (можно сгенерировать).
    Критерий приёмки: результаты расчётов совпадают с аналогами из торговых терминалов (например, TradingView) с допуском на погрешность 1e-6.
    Тесты должны запускаться через pytest.

# 9. Особые указания для Qwen3 Code

    Можно создавать новые файлы и папки в src/.
    Нельзя использовать внешние зависимости кроме pandas и NumPy.
    Нужно добавлять docstring и типизацию.
    Форматирование: strict black.
    Все индикаторы должны быть расширяемыми — легко добавить новые в будущем.

